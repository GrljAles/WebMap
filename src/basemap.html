<template>
  <require from="resources/value-converters/objectKeysValueConverter"></require>
  <div class="row">
    <ul class="light-green darken-1 collection with-header col l3 m3 s3 layer-list scrollbar-hidden">
      <li class="collection-header light-green darken-3"><h4>Layers</h4></li>
        <div class="collapsible-open-close-events">
          <ul md-collapsible md-on-open-start.delegate="collapsibleOpen($event.detail.el.childNodes[1].id)" md-on-close-start.delegate="collapsibleClose($event.detail.el.childNodes[1].id)">
            <li repeat.for="layer of layers | objectKeys">
              <div class="collapsible-header light-green darken-${layer.id+2}" id=${layer.id}>
                <h5 class="white-text">${layer.name}</h5>
              </div>
              <div id="collapsible-body${layer.id}" class="collapsible-body">
                <div class="row">Slide to change opacity
                  <div class="col s12 opacity-slider" id="opacity-slider${layer.id}"></div>
                </div>
                <div class="row">Slide to display different dates <br>${layer.displayedDate}
                  <div class="col s12 date-slider" id="date-slider${layer.id}"></div>
                </div>
                <div class="row">Slide to adjust min (${layer.displaySettings.min}) and max (${layer.displaySettings.max}) values
                  <div class="col s12 min-max-slider" id="min-max-slider${layer.id}"></div>
                </div>
                <div id="legend-holder${layer.id}"></div>
                <div>
                  <!-- <a show.bind="!identifyTool.indentifyButtonActive" md-button="floating: true;" md-tooltip="position: bottom; text: Reset range settings;" md-waves="color: light;" class="red" click.trigger="resetRangeSettings(layer.id)"><i class="material-icons">cached</i></a>
                  <a md-button="floating: true;" md-tooltip="position: bottom; text: Toggle get value at clicked location;" md-waves="color: light;" class.bind="identifyTool.indentifyButtonActive ? 'red' : 'blue'" click.trigger="identifyTool.toggleIdentifyButton()"><i class="material-icons">details</i></a>
                  <a show.bind="identifyTool.identifyResultWindow" md-button="floating: true;" md-tooltip="position: bottom; text: Delete the results table?;" md-waves="color: light;" class.bind="identifyTool.indentifyButtonActive ? 'red' : 'blue'" click.trigger="identifyTool.confirmDeleteTable()"><i class="material-icons">${identifyTool.deleteTable ? 'close' : 'delete'}</i></a>
                  <a show.bind="identifyTool.deleteTable" md-button="floating: true;" md-tooltip="position: bottom; text: Yes, delete please;" md-waves="color: light;" class.bind="identifyTool.indentifyButtonActive ? 'red' : 'blue'" click.trigger="identifyTool.yesDeleteTable()"><i class="material-icons">check</i></a>
                  <a show.bind="identifyTool.identifyResultWindow" md-button="floating: true;" md-tooltip="position: bottom; text: Save the results locally;" md-waves="color: light;" class.bind="identifyTool.indentifyButtonActive ? 'red' : 'blue'" click.trigger="saveIdentifyGeojson()" download="identifyTable.geojson" href="${identifyTool.uriContent}"><i class="material-icons">file_download</i></a>
                  <a md-button="floating: true;" md-tooltip="position: bottom; text: Toggle get value at clicked location;" md-waves="color: light;" class.bind="identifyTool.indentifyButtonActive ? 'red' : 'blue'" click.trigger="identifyTool.toggleIdentifyButton()"><i class="material-icons">dashboard</i></a>
                  <a md-button="floating: true;" md-tooltip="position: bottom; text: Toggle get value at clicked location;" md-waves="color: light;" class.bind="identifyTool.indentifyButtonActive ? 'red' : 'blue'" click.trigger="identifyTool.toggleIdentifyButton()"><i class="material-icons">timeline</i></a>
                  <a md-button="floating: true;" md-tooltip="position: bottom; text: Toggle get value at clicked location;" md-waves="color: light;" class.bind="identifyTool.indentifyButtonActive ? 'red' : 'blue'" click.trigger="identifyTool.toggleIdentifyButton()"><i class="material-icons">multiline_chart</i></a>
                  <a md-button="floating: true;" md-tooltip="position: bottom; text: Toggle get value at clicked location;" md-waves="color: light;" class.bind="identifyTool.indentifyButtonActive ? 'red' : 'blue'" click.trigger="identifyTool.toggleIdentifyButton()"><i class="material-icons">terrain</i></a> -->

                  <a id='refresh' md-button="floating: true;" md-tooltip="position: bottom; text: Reset range settings;" md-waves="color: light;" class="tr-green" click.trigger="resetRangeSettings(layer.id)"><i class="material-icons icon-white">cached</i></a>
                  <a id='identify' md-button="floating: true;" md-tooltip="position: bottom; text: Toggle get value at clicked location;" md-waves="color: light;" click.trigger="toggleTool('identify')" class.bind="buttonCheck.identify.state ? 'lime' : 'tr-green'"><i class.bind="buttonCheck.identify.state ? 'material-icons icon-grey' : 'material-icons icon-white'">details</i></a>
                  <a id='zonalStat' md-button="floating: true;" md-tooltip="position: bottom; text: Toggle get value at clicked location;" md-waves="color: light;" class.bind="buttonCheck.zonalStat.state ? 'lime' : 'tr-green'" click.trigger="toggleTool('zonalStat')"><i class.bind="buttonCheck.zonalStat.state ? 'material-icons icon-grey' : 'material-icons icon-white'">dashboard</i></a>
                  <a id='tsChart' md-button="floating: true;" md-tooltip="position: bottom; text: Toggle get value at clicked location;" md-waves="color: light;" class.bind="buttonCheck.tsChart.state ? 'lime' : 'tr-green'" click.trigger="toggleTool('tsChart')"><i class.bind="buttonCheck.tsChart.state ? 'material-icons icon-grey' : 'material-icons icon-white'">timeline</i></a>
                  <a id='zonalTSChart' md-button="floating: true;" md-tooltip="position: bottom; text: Toggle get value at clicked location;" md-waves="color: light;" class.bind="buttonCheck.zonalTSChart.state ? 'lime' : 'tr-green'" click.trigger="toggleTool('zonalTSChart')"><i class.bind="buttonCheck.zonalTSChart.state ? 'material-icons icon-grey' : 'material-icons icon-white'">multiline_chart</i></a>
                  <a id='profile' md-button="floating: true;" md-tooltip="position: bottom; text: Toggle get value at clicked location;" md-waves="color: light;" class.bind="buttonCheck.profile.state ? 'lime' : 'tr-green'" click.trigger="toggleTool('profile')"><i class.bind="buttonCheck.profile.state ? 'material-icons icon-grey' : 'material-icons icon-white'">terrain</i></a>

                </div>
              </div>
            </li>
          </ul>
        </div>
      </li>

      <!-- Indentify Table -->

      <div show.bind="identifyTool.buttonCheck.identify.state" class="col l12 m12 s12 scale-transition results-table lime">
        <div>
          <div class='table-comtrolls-wrapper'>
            <h5 class='table-controll-title white-text'>RESULTS TABLE</h5>
            <span> 
              <a id='yesDelete' show.bind="identifyTool.resultsTables.identifyPoints.delete" md-button="floating: true;" md-tooltip="position: bottom; text: Yes, delete please;" md-waves="color: light;" class="tr-green" click.trigger="identifyTool.yesDeleteTable('identifyPoints')"><i class="material-icons icon-grey">check</i></a>
              <a id='save' md-button="floating: true;" md-tooltip="position: bottom; text: Save the results locally;" md-waves="color: light;" class="tr-green" click.trigger="saveIdentifyGeojson('identifyPoints')" download="identifyTable.geojson" href="${identifyTool.uriContent}"><i class="material-icons icon-grey">file_download</i></a>
              <a id='deleteIndentifyTable' md-button="floating: true;" md-tooltip="position: bottom; text: Delete the results table?;" md-waves="color: light;" class="tr-green" click.trigger="identifyTool.confirmDeleteTable('identifyPoints')"><i class="material-icons icon-grey">${identifyTool.resultsTables.identifyPoints.delete ? 'close' : 'delete'}</i></a>
              <!-- <a id='save' show.bind="buttonCheck.identify" md-button="floating: true;" md-tooltip="position: bottom; text: Select/Draw mode;" md-waves="color: light;" class="tr-green" click.trigger="saveIdentifyGeojson()" download="identifyTable.geojson" href="${identifyTool.uriContent}"><i class="material-icons icon-grey">${identifyTool.deleteTable ? 'edit' : 'select_all'}</i></a> -->
            </span>
          </div>
          <table class="responsive-table striped centered">
            <thead class="collection-header lime">
              <tr>
                  <th>Id</th>
                  <th>Product</th>
                  <th>Date</th>
                  <th>Value</th>
                  <th><a class="btn-flat"><i class="material-icons icon-grey">close</i></a></th>
              </tr>
            </thead>
            <tbody class="rows-font-size lime">
              <tr repeat.for="element of identifyTool.resultsTables.identifyPoints.table">
                <td>${element.id}</td>
                <td>${element.product}</td>
                <td>${element.date}</td>
                <td>${element.value}</td>
                <td><a md-button="floating: true;" md-tooltip="position: bottom; text: Delete this row;" md-waves="color: light;" class="tr-button btn-small" click.trigger="identifyTool.deleteResultsTableRow('identifyPoints', element.id)"><i class="material-icons icon-grey">close</i></a></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Zonal Statistics Table -->

      <div show.bind="identifyTool.buttonCheck.zonalStat.state" class="col l12 m12 s12 scale-transition results-table lime">
        <div>
          <div class='table-comtrolls-wrapper'>
            <h5 class='table-controll-title white-text'>RESULTS TABLE</h5>
            <span> 
              <a id='yesDelete' show.bind="identifyTool.resultsTables.zonalStatsPolygons.delete" md-button="floating: true;" md-tooltip="position: bottom; text: Yes, delete please;" md-waves="color: light;" class="tr-green" click.trigger="identifyTool.yesDeleteTable('zonalStatsPolygons')"><i class="material-icons icon-grey">check</i></a>
              <a id='save' md-button="floating: true;" md-tooltip="position: bottom; text: Save the results locally;" md-waves="color: light;" class="tr-green" click.trigger="saveIdentifyGeojson('zonalStatsPolygons')" download="zonalStatsPolygons.geojson" href="${identifyTool.uriContent}"><i class="material-icons icon-grey">file_download</i></a>
              <a id='deleteZonalStatsTable' md-button="floating: true;" md-tooltip="position: bottom; text: Delete the results table?;" md-waves="color: light;" class="tr-green" click.trigger="identifyTool.confirmDeleteTable('zonalStatsPolygons')"><i class="material-icons icon-grey">${identifyTool.resultsTables.zonalStatsPolygons.delete ? 'close' : 'delete'}</i></a>
              <!-- <a id='save' show.bind="buttonCheck.identify" md-button="floating: true;" md-tooltip="position: bottom; text: Select/Draw mode;" md-waves="color: light;" class="tr-green" click.trigger="saveIdentifyGeojson()" download="identifyTable.geojson" href="${identifyTool.uriContent}"><i class="material-icons icon-grey">${identifyTool.deleteTable ? 'edit' : 'select_all'}</i></a> -->
            </span>
          </div>
          <table class="responsive-table striped centered">
            <thead class="collection-header lime">
              <tr>
                  <th>Id</th>
                  <th>Product</th>
                  <th>Date</th>
                  <th>Min</th>
                  <th>Max</th>
                  <th>Mn</th>
                  <th>Std</th>
                  <th>Rng</th>
                  <th><a class="btn-flat"><i class="material-icons icon-grey">close</i></a></th>
              </tr>
            </thead>
            <tbody class="rows-font-size lime">
              <tr repeat.for="element of identifyTool.zonalStatsArray">
                <td>${element.id}</td>
                <td>${element.product}</td>
                <td>${element.date}</td>
                <td>${element.min}</td>
                <td>${element.max}</td>
                <td>${element.mean}</td>
                <td>${element.std}</td>
                <td>${element.range}</td>
                <td><a md-button="floating: true;" md-tooltip="position: bottom; text: Delete this row;" md-waves="color: light;" class="tr-button btn-small" click.trigger="identifyTool.deleteResultsTableRow(element.id)"><i class="material-icons icon-grey">close</i></a></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </ul>
    <div id="basemap" class="map col l9 m9 s9"></div>
    </div>
</template>
